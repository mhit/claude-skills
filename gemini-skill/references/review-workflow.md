# Review Workflow - セカンドオピニオン

Geminiをセカンドオピニオンとして活用し、コードや回答の品質を向上させる。

## 推奨モデル

**`gemini-2.5-pro`** - 思考モデル、コード分析に特化

## いつ使うか

- Claudeの回答を別の視点で検証したい
- コードレビューで見落としがないか確認したい
- 設計判断の妥当性を確認したい
- 重要な決定に対して複数の意見がほしい

## 実行手順

### 1. レビュー対象の準備

```bash
# 差分をファイルに保存
git diff > /tmp/changes.diff

# または特定ファイル
cat src/feature.ts > /tmp/review_target.ts
```

### 2. Gemini呼び出し

```bash
# コードレビュー（Gemini 2.5 Pro推奨 - 思考モデル）
gemini -m gemini-2.5-pro "以下のコード変更をレビューしてください。バグ、セキュリティ問題、改善点を指摘してください" < /tmp/changes.diff

# 回答検証
gemini -m gemini-2.5-pro "以下の回答を検証してください。誤り、不足、改善点があれば指摘してください" < /tmp/claude_response.txt

# gemini-call.shを使う場合
git diff | gemini-call.sh --task review "この変更をレビューして"
```

### 3. プロンプト例

**コードレビュー**:
```
以下のコード変更をレビューしてください:

観点:
1. バグや論理エラー
2. セキュリティの脆弱性
3. パフォーマンスの問題
4. コードの可読性・保守性
5. エッジケースの考慮漏れ

重要度（Critical/Major/Minor）と具体的な修正提案を含めてください。
```

**設計レビュー**:
```
以下の設計判断をレビューしてください:

[設計内容]

観点:
1. スケーラビリティ
2. 保守性
3. 拡張性
4. 代替案との比較
5. トレードオフの妥当性
```

**回答検証**:
```
以下の技術的な回答を検証してください:

[回答内容]

確認ポイント:
1. 事実の正確性
2. 最新情報との整合性
3. 見落としている観点
4. より良い代替案
```

## レビュー結果の統合

Geminiのレビュー結果をClaudeが処理:

1. 指摘された問題の修正
2. 提案の取り込み判断
3. 最終的なコードの完成

## Tips

- 重要な変更（本番デプロイ前など）では必ずセカンドオピニオンを取る
- 異なる視点からの指摘は貴重。全て採用する必要はないが検討する
- 両者の意見が食い違う場合は、理由を比較して判断する
